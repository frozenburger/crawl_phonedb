from bs4 import BeautifulSoup
import requests
from pprint import pprint
import pandas as pd

database = pd.DataFrame()

string =  '1-29 | 30-58 | 59-87 | 88-116 | 117-145 | 146-174 | 175-203 | 204-232 | 233-261 | 262-290 | 291-319 | 320-348 | 349-377 | 378-406 | 407-435 | 436-464 | 465-493 | 494-522 | 523-551 | 552-580 | 581-609 | 610-638 | 639-667 | 668-696 | 697-725 | 726-754 | 755-783 | 784-812 | 813-841 | 842-870 | 871-899 | 900-928 | 929-957 | 958-986 | 987-1015 | 1016-1044 | 1045-1073 | 1074-1102 | 1103-1131 | 1132-1160 | 1161-1189 | 1190-1218 | 1219-1247 | 1248-1276 | 1277-1305 | 1306-1334 | 1335-1363 | 1364-1392 | 1393-1421 | 1422-1450 | 1451-1479 | 1480-1508 | 1509-1537 | 1538-1566 | 1567-1595 | 1596-1624 | 1625-1653 | 1654-1682 | 1683-1711 | 1712-1740 | 1741-1769 | 1770-1798 | 1799-1827 | 1828-1856 | 1857-1885 | 1886-1914 | 1915-1943 | 1944-1972 | 1973-2001 | 2002-2030 | 2031-2059 | 2060-2088 | 2089-2117 | 2118-2146 | 2147-2175 | 2176-2204 | 2205-2233 | 2234-2262 | 2263-2291 | 2292-2320 | 2321-2349 | 2350-2378 | 2379-2407 | 2408-2436 | 2437-2465 | 2466-2494 | 2495-2523 | 2524-2552 | 2553-2581 | 2582-2610 | 2611-2639 | 2640-2668 | 2669-2697 | 2698-2726 | 2727-2755 | 2756-2784 | 2785-2813 | 2814-2842 | 2843-2871 | 2872-2900 | 2901-2929 | 2930-2958 | 2959-2987 | 2988-3016 | 3017-3045 | 3046-3074 | 3075-3103 | 3104-3132 | 3133-3161 | 3162-3190 | 3191-3219 | 3220-3248 | 3249-3277 | 3278-3306 | 3307-3335 | 3336-3364 | 3365-3393 | 3394-3422 | 3423-3451 | 3452-3480 | 3481-3509 | 3510-3538 | 3539-3567 | 3568-3596 | 3597-3625 | 3626-3654 | 3655-3683 | 3684-3712 | 3713-3741 | 3742-3770 | 3771-3799 | 3800-3828 | 3829-3857 | 3858-3886 | 3887-3915 | 3916-3944 | 3945-3973 | 3974-4002 | 4003-4031 | 4032-4060 | 4061-4089 | 4090-4118 | 4119-4147 | 4148-4176 | 4177-4205 | 4206-4234 | 4235-4263 | 4264-4292 | 4293-4321 | 4322-4350 | 4351-4379 | 4380-4408 | 4409-4437 | 4438-4466 | 4467-4495 | 4496-4524 | 4525-4553 | 4554-4582 | 4583-4611 | 4612-4640 | 4641-4669 | 4670-4698 | 4699-4727 | 4728-4756 | 4757-4785 | 4786-4814 | 4815-4843 | 4844-4872 | 4873-4901 | 4902-4930 | 4931-4959 | 4960-4988 | 4989-5017 | 5018-5046 | 5047-5075 | 5076-5104 | 5105-5133 | 5134-5162 | 5163-5191 | 5192-5220 | 5221-5249 | 5250-5278 | 5279-5307 | 5308-5336 | 5337-5365 | 5366-5394 | 5395-5423 | 5424-5452 | 5453-5481 | 5482-5510 | 5511-5539 | 5540-5568 | 5569-5597 | 5598-5626 | 5627-5655 | 5656-5684 | 5685-5713 | 5714-5742 | 5743-5771 | 5772-5800 | 5801-5829 | 5830-5858 | 5859-5887 | 5888-5916 | 5917-5945 | 5946-5974 | 5975-6003 | 6004-6032 | 6033-6061 | 6062-6090 | 6091-6119 | 6120-6148 | 6149-6177 | 6178-6206 | 6207-6235 | 6236-6264 | 6265-6293 | 6294-6322 | 6323-6351 | 6352-6380 | 6381-6409 | 6410-6438 | 6439-6467 | 6468-6496 | 6497-6525 | 6526-6554 | 6555-6583 | 6584-6612 | 6613-6641 | 6642-6670 | 6671-6699 | 6700-6728 | 6729-6757 | 6758-6786 | 6787-6815 | 6816-6844 | 6845-6873 | 6874-6902 | 6903-6931 | 6932-6960 | 6961-6989 | 6990-7018 | 7019-7047 | 7048-7076 | 7077-7105 | 7106-7134 | 7135-7163 | 7164-7192 | 7193-7221 | 7222-7250 | 7251-7279 | 7280-7308 | 7309-7337 | 7338-7366 | 7367-7395 | 7396-7424 | 7425-7453 | 7454-7482 | 7483-7511 | 7512-7540 | 7541-7569 | 7570-7598 | 7599-7627 | 7628-7656 | 7657-7685 | 7686-7714 | 7715-7743 | 7744-7772 | 7773-7801 | 7802-7830 | 7831-7859 | 7860-7888 | 7889-7917 | 7918-7946 | 7947-7975 | 7976-8004 | 8005-8033 | 8034-8062 | 8063-8091 | 8092-8120 | 8121-8149 | 8150-8178 | 8179-8207 | 8208-8236 | 8237-8265 | 8266-8294 | 8295-8323 | 8324-8352 | 8353-8381 | 8382-8410 | 8411-8439 | 8440-8468 | 8469-8497 | 8498-8526 | 8527-8555 | 8556-8584 | 8585-8613 | 8614-8642 | 8643-8671 | 8672-8700 | 8701-8729 | 8730-8758 | 8759-8787 | 8788-8816 | 8817-8845 | 8846-8874 | 8875-8903 | 8904-8932 | 8933-8961 | 8962-8990 | 8991-9019 | 9020-9048 | 9049-9077 | 9078-9106 | 9107-9135 | 9136-9164 | 9165-9193 | 9194-9222 | 9223-9251 | 9252-9280 | 9281-9309 | 9310-9338 | 9339-9367 | 9368-9396 | 9397-9425 | 9426-9454 | 9455-9483 | 9484-9512 | 9513-9541 | 9542-9570 | 9571-9599 | 9600-9628 | 9629-9657 | 9658-9686 | 9687-9715 | 9716-9744 | 9745-9773 | 9774-9802 | 9803-9831 | 9832-9860 | 9861-9889 | 9890-9918 | 9919-9947 | 9948-9976 | 9977-10005 | 10006-10034 | 10035-10063 | 10064-10092 | 10093-10121 | 10122-10150 | 10151-10179 | 10180-10208 | 10209-10237 | 10238-10266 | 10267-10295 | 10296-10324 | 10325-10353 | 10354-10382 | 10383-10411 | 10412-10440 | 10441-10469 | 10470-10498 | 10499-10527 | 10528-10556 | 10557-10585 | 10586-10614 | 10615-10643 | 10644-10672 | 10673-10701 | 10702-10730 | 10731-10759 | 10760-10788 | 10789-10817 | 10818-10846 | 10847-10875 | 10876-10904 | 10905-10933 | 10934-10962 | 10963-10991 | 10992-11020 | 11021-11049 | 11050-11078 | 11079-11107 | 11108-11136 | 11137-11165 | 11166-11194 | 11195-11223 | 11224-11252 | 11253-11281 | 11282-11310 | 11311-11339 | 11340-11368 | 11369-11397 | 11398-11426 | 11427-11455 | 11456-11484 | 11485-11513 | 11514-11542 | 11543-11571 | 11572-11600 | 11601-11629 | 11630-11658 | 11659-11687 | 11688-11716 | 11717-11745 | 11746-11774 | 11775-11803 | 11804-11832 | 11833-11861 | 11862-11890 | 11891-11919 | 11920-11948 | 11949-11977 | 11978-12006 | 12007-12035 | 12036-12064 | 12065-12093 | 12094-12122 | 12123-12151 | 12152-12180 | 12181-12209 | 12210-12238 | 12239-12267 | 12268-12296 | 12297-12325 | 12326-12354 | 12355-12383 | 12384-12412 | 12413-12441 | 12442-12470 | 12471-12499 | 12500-12528 | 12529-12557 | 12558-12586 | 12587-12615 | 12616-12644 | 12645-12673 | 12674-12702 | 12703-12731 | 12732-12760 | 12761-12789 | 12790-12818 | 12819-12847 | 12848-12876 | 12877-12905 | 12906-12934 | 12935-12963 | 12964-12992 | 12993-13021 | 13022-13050 | 13051-13079 | 13080-13108 | 13109-13137 | 13138-13166 | 13167-13195 | 13196-13224 | 13225-13253 | 13254-13282 | 13283-13311 | 13312-13340 | 13341-13369 | 13370-13398 | 13399-13427 | 13428-13456 | 13457-13485 | 13486-13514 | 13515-13543 | 13544-13572 | 13573-13601 | 13602-13630 | 13631-13659 | 13660-13688 | 13689-13717 | 13718-13746 | 13747-13775 | 13776-13804 | 13805-13833 | 13834-13862 | 13863-13891 | 13892-13920 | 13921-13949 | 13950-13978 | 13979-14007 | 14008-14036 | 14037-14065 | 14066-14094 | 14095-14123 | 14124-14152 | 14153-14181 | 14182-14210 | 14211-14239 | 14240-14268 | 14269-14297 | 14298-14326 | 14327-14355 | 14356-14384 | 14385-14413 | 14414-14442 | 14443-14471 | 14472-14500 | 14501-14529 | 14530-14558 | 14559-14587 | 14588-14616 | 14617-14645 | 14646-14674 | 14675-14703 | 14704-14732 | 14733-14761 | 14762-14790 | 14791-14819 | 14820-14848 | 14849-14877 | 14878-14906 | 14907-14935 | 14936-14964 | 14965-14993 | 14994-15022 | 15023-15051 | 15052-15080 | 15081-15109 | 15110-15138 | 15139-15167 | 15168-15196 | 15197-15225 | 15226-15254 | 15255-15283 | 15284-15312 | 15313-15341 | 15342-15370 | 15371-15399 | 15400-15428 | 15429-15457 | 15458-15486 | 15487-15515 | 15516-15544 | 15545-15573 | 15574-15602 | 15603-15631 | 15632-15660 | 15661-15689 | 15690-15718 | 15719-15747 | 15748-15776 | 15777-15805 | 15806-15834 | 15835-15863 | 15864-15892 | 15893-15921 | 15922-15950 | 15951-15979 | 15980-16008 | 16009-16037 | 16038-16066 | 16067-16095 | 16096-16124 | 16125-16153 | 16154-16182 | 16183-16211 | 16212-16240 | 16241-16269 | 16270-16298 | 16299-16327 | 16328-16356 | 16357-16385 | 16386-16414 | 16415-16443 | 16444-16472 | 16473-16501 | 16502-16530 | 16531-16559 | 16560-16588 | 16589-16617 | 16618-16646 | 16647-16670 '
index = string.split(' | ')
index = list(map(lambda x : str(int(x.split('-')[0])-1), index))

base_url = 'http://phonedb.net/'
urls = list(map(lambda x : base_url+x, index))

url = 'http://phonedb.net/index.php?m=device&s=list&filter='
req = requests.get(url+'0')
soup = BeautifulSoup(req.content, 'html.parser')
contents = list(soup.find_all(class_='content_block_title'))
batch_urls = list(map(lambda x : base_url+x.a.get('href'), contents))

for url in batch_urls[0:9]:
    req = requests.get(url)
    soup = BeautifulSoup(req.content, 'html.parser')
    values = list(soup.find('table').find_all('tr'))
    index = ['Width', 'Height', 'Depth', 'Operating System', 'Brand']
    index.append('Model')

    sr_temp = pd.Series(dtype=None)
    count = 0
    for attribute in values:
        if (attribute.findChildren('td')[0].text in index):
            sr_temp[attribute.findChildren('td')[0].text] = attribute.findChildren('td')[1].text
            count += 1
        if count == len(index) : break
    device_name = sr_temp.pop('Model')
    database[device_name] = sr_temp
result = database.T



